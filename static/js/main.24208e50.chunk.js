(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{131:function(e,t,a){},133:function(e,t,a){},150:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(31),s=a.n(i),o=a(13),c=a.n(o),l=a(17),u=a(21),h=a(22),m=a(25),d=a(23),p=a(26),f=a(41),g=a(33),b=a(157),E=a(155),v=a(156),w=a(51),C=(a(92),a(32)),y=a(42),S=a(73),k=a.n(S),O=a(45),x=a(152),j=a(153),L=a(158),A=(a(94),new(a(80).a));function N(e,t){var a=new Date;a.setTime(a.getTime()+216e5),A.set(e,t,{path:"/",expires:a})}function F(){return P.apply(this,arguments)}function P(){return(P=Object(l.a)(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://chrono-omega.herokuapp.com/api/verifytoken?token="+(a="token",A.get(a)),{method:"GET"}).then(function(e){return e.text()}).then(function(e){return e});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}var a},e,this)}))).apply(this,arguments)}var T=a(38),z=a(151),I=a(130),H=(a(96),function(e){var t=e.isLoading,a=e.text,n=e.loadingText,i=e.className,s=void 0===i?"":i,o=e.disabled,c=void 0!==o&&o,l=Object(T.a)(e,["isLoading","text","loadingText","className","disabled"]);return r.a.createElement(z.a,Object.assign({className:"LoaderButton ".concat(s),disabled:c||t},l),t&&r.a.createElement(I.a,{glyph:"refresh",className:"spinning"}),t?n:a)}),D=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(O.a)({},e.target.id,e.target.value))},a.handleSubmit=function(){var e=Object(l.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a.setState({isLoading:!0}),e.next=4,fetch("https://chrono-omega.herokuapp.com/api/login?mail="+a.state.email+"&pw="+a.state.password,{method:"GET"}).then(function(e){return e.text()}).then(function(e){"false"!==e&&N("token",e)});case 4:return e.next=6,F().then(function(e){a.props.userNameChange(e),a.props.userHasAuthenticated(""!==e)}).then(function(){a.setState({isLoading:!1}),!0===a.props.isAuthenticated?a.props.history.push("/"):alert("Login failed.")});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.state={email:"",password:""},a}return Object(p.a)(t,e),Object(h.a)(t,[{key:"validateForm",value:function(){return this.state.email.length>0&&this.state.password.length>0}},{key:"render",value:function(){return r.a.createElement("div",{className:"Login"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(x.a,{controlId:"email",bsSize:"large"},r.a.createElement(j.a,null,"Email"),r.a.createElement(L.a,{autoFocus:!0,type:"email",value:this.state.email,onChange:this.handleChange})),r.a.createElement(x.a,{controlId:"password",bsSize:"large"},r.a.createElement(j.a,null,"Password"),r.a.createElement(L.a,{value:this.state.password,onChange:this.handleChange,type:"password"})),r.a.createElement(H,{block:!0,bsSize:"large",disabled:!this.validateForm(),type:"submit",isLoading:this.state.isLoading,text:"Login",loadingText:"Logging in\u2026"})))}}]),t}(n.Component),B=(a(131),function(){return r.a.createElement("div",{className:"NotFound"},r.a.createElement("h3",null,"Sorry, page not found!"))}),G=function(e){var t=e.component,a=e.props,n=Object(T.a)(e,["component","props"]);return r.a.createElement(y.a,Object.assign({},n,{render:function(e){return r.a.createElement(t,Object.assign({},e,a))}}))},J=a(154),V=(a(133),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(O.a)({},e.target.id,e.target.value))},a.handleSubmit=function(){var e=Object(l.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a.setState({isLoading:!0}),e.next=4,fetch("https://chrono-omega.herokuapp.com/api/newaccount?mail="+a.state.email+"&pw="+a.state.password,{method:"POST"}).then(function(e){return e.text()}).then(function(e){"false"===e?alert("Account creation failed."):a.props.history.push("/")});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.handleConfirmationSubmit=function(){var e=Object(l.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a.setState({isLoading:!0});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.state={email:"",password:"",confirmPassword:"",confirmationCode:"",newUser:!1},a}return Object(p.a)(t,e),Object(h.a)(t,[{key:"validateForm",value:function(){return this.state.email.length>0&&this.state.password.length>0&&this.state.password===this.state.confirmPassword}},{key:"validateConfirmationForm",value:function(){return this.state.confirmationCode.length>0}},{key:"renderConfirmationForm",value:function(){return r.a.createElement("form",{onSubmit:this.handleConfirmationSubmit},r.a.createElement(x.a,{controlId:"confirmationCode",bsSize:"large"},r.a.createElement(j.a,null,"Confirmation Code"),r.a.createElement(L.a,{autoFocus:!0,type:"tel",value:this.state.confirmationCode,onChange:this.handleChange}),r.a.createElement(J.a,null,"Please check your email for the code.")),r.a.createElement(H,{block:!0,bsSize:"large",disabled:!this.validateConfirmationForm(),type:"submit",isLoading:this.state.isLoading,text:"Verify",loadingText:"Verifying\u2026"}))}},{key:"renderForm",value:function(){return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(x.a,{controlId:"email",bsSize:"large"},r.a.createElement(j.a,null,"Email"),r.a.createElement(L.a,{autoFocus:!0,type:"email",value:this.state.email,onChange:this.handleChange})),r.a.createElement(x.a,{controlId:"password",bsSize:"large"},r.a.createElement(j.a,null,"Password"),r.a.createElement(L.a,{value:this.state.password,onChange:this.handleChange,type:"password"})),r.a.createElement(x.a,{controlId:"confirmPassword",bsSize:"large"},r.a.createElement(j.a,null,"Confirm Password"),r.a.createElement(L.a,{value:this.state.confirmPassword,onChange:this.handleChange,type:"password"})),r.a.createElement(H,{block:!0,bsSize:"large",disabled:!this.validateForm(),type:"submit",isLoading:this.state.isLoading,text:"Signup",loadingText:"Signing up\u2026"}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"Signup"},this.renderForm())}}]),t}(n.Component)),M=function(e){var t=e.childProps;return r.a.createElement(C.a,null,r.a.createElement(G,{path:"/login",exact:!0,component:D,props:t}),r.a.createElement(G,{path:"/",exact:!0,component:k.a,props:t}),r.a.createElement(G,{path:"/signup",exact:!0,component:V,props:t}),r.a.createElement(y.a,{component:B}))},R=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).setName=function(e){a.setState({name:"@ "+e})},a.userHasAuthenticated=function(e){a.setState({isAuthenticated:e})},a.handleLogout=function(e){var t;a.userHasAuthenticated(!1),t="token",A.remove(t),a.setName(""),a.props.history.push("/login")},a.state={isAuthenticated:!1,isAuthenticating:!0,isLoading:!1,name:""},a}return Object(p.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(l.a)(c.a.mark(function e(){var t=this;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isAuthenticating:!1}),this.setName(""),e.prev=2,e.next=5,F().then(function(e){t.setName(e),console.log(t.state.name),t.setState({isAuthenticated:""!==e})});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),"No current user"!==e.t0&&alert(e.t0);case 10:!1===this.state.isAuthenticated&&this.props.history.push("/login");case 11:case"end":return e.stop()}},e,this,[[2,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e={isAuthenticated:this.state.isAuthenticated,userNameChange:this.setName,userHasAuthenticated:this.userHasAuthenticated,isLoading:this.state.isLoading};return!this.state.isAuthenticating&&r.a.createElement("div",{className:"App container"},r.a.createElement(b.a,{fluid:!0,collapseOnSelect:!0},r.a.createElement(b.a.Header,null,r.a.createElement(b.a.Brand,null,r.a.createElement(f.a,{to:"/"},"Chrono Alpha ",this.state.name)),r.a.createElement(b.a.Toggle,null)),r.a.createElement(b.a.Collapse,null,r.a.createElement(E.a,{pullRight:!0},this.state.isAuthenticated?r.a.createElement(v.a,{onClick:this.handleLogout},"Logout"):r.a.createElement(n.Fragment,null,r.a.createElement(w.LinkContainer,{to:"/signup"},r.a.createElement(v.a,null,"Signup")),r.a.createElement(w.LinkContainer,{to:"/login"},r.a.createElement(v.a,null,"Login")))))),r.a.createElement(M,{childProps:e}))}}]),t}(n.Component),U=Object(g.a)(R),q=a(56);s.a.render(r.a.createElement(q.a,null,r.a.createElement(U,null)),document.getElementById("root"))},73:function(e,t){},81:function(e,t,a){e.exports=a(150)},92:function(e,t,a){},94:function(e,t,a){},96:function(e,t,a){}},[[81,2,1]]]);
//# sourceMappingURL=main.24208e50.chunk.js.map