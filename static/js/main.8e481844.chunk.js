(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{129:function(e,t,n){},131:function(e,t,n){},133:function(e,t,n){},150:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(30),s=n.n(i),o=n(10),c=n.n(o),u=n(14),l=n(17),h=n(18),m=n(20),p=n(19),d=n(21),f=n(36),g=n(43),b=n(156),v=n(154),E=n(155),w=n(51),k=(n(92),n(42)),j=n(37),O=n(39),y=n(152),S=n(153),x=n(157),C=n(46),L=n(151),T=n(128),A=(n(94),function(e){var t=e.isLoading,n=e.text,a=e.loadingText,i=e.className,s=void 0===i?"":i,o=e.disabled,c=void 0!==o&&o,u=Object(C.a)(e,["isLoading","text","loadingText","className","disabled"]);return r.a.createElement(L.a,Object.assign({className:"LoaderButton ".concat(s),disabled:c||t},u),t&&r.a.createElement(T.a,{glyph:"refresh",className:"spinning"}),t?a:n)}),N=new(n(80).a);function F(e,t){var n=new Date;n.setTime(n.getTime()+216e5),N.set(e,t,{path:"/",expires:n})}function P(e){return N.get(e)}function z(e){N.remove(e)}var D=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).handleChange=function(e){n.setState(Object(O.a)({},e.target.id,e.target.value))},n.newTimeline=function(){var e=Object(u.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n.setState({isLoading:!0}),e.next=4,fetch("https://chrono-omega.herokuapp.com/api/newtimeline?token="+P("token")+"&name="+n.state.name,{method:"POST"}).then(function(e){return e.text()}).then(function(e){"true"!==e&&alert("Timeline creation failed.")});case 4:n.setState({isLoading:!1});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.state={name:"",isLoading:!1},n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"NewTimelineForm",value:function(){return r.a.createElement("form",{onSubmit:this.newTimeline},r.a.createElement(y.a,{controlId:"name",bsSize:"large"},r.a.createElement(S.a,null,"New Timeline Name"),r.a.createElement(x.a,{autoFocus:!0,type:"name",value:this.state.name,onChange:this.handleChange})),r.a.createElement(A,{block:!0,bsSize:"large",disabled:!this.validateNewTimeline(),type:"submit",isLoading:this.state.isLoading,text:"Create new timeline",loadingText:"Booming bigly..."}))}},{key:"validateNewTimeline",value:function(){return this.state.name.length>0}},{key:"render",value:function(){return r.a.createElement("div",null,this.NewTimelineForm())}}]),t}(a.Component),H=n(77),I=n.n(H),B=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).fetchTimelines=function(){var e=Object(u.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null==P("token")){e.next=3;break}return e.next=3,fetch("https://chrono-omega.herokuapp.com/api/timelines?token="+P("token"),{method:"GET"}).then(function(e){if(e.ok)return e.json();alert("Something went wrong")}).then(function(e){n.setState({jsonObject:e})});case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.state={jsonObject:"",isLoading:!1},n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){var e=Object(u.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchTimelines();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(I.a,{src:this.state.jsonObject,name:"Timelines",theme:"grayscale:inverted",onEdit:t.getTrue(),onAdd:t.getTrue(),onDelete:t.getTrue(),sortKeys:!0}))}}],[{key:"getTrue",value:function(){return!0}}]),t}(a.Component),G=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={name:"",isLoading:!1},n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"Home"},r.a.createElement(D,{props:this.props}),r.a.createElement(B,{props:this.props}))}}]),t}(a.Component);n(129);function J(){return M.apply(this,arguments)}function M(){return(M=Object(u.a)(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://chrono-omega.herokuapp.com/api/verifytoken?token="+P("token"),{method:"GET"}).then(function(e){return e.text()}).then(function(e){return e});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var K=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).handleChange=function(e){n.setState(Object(O.a)({},e.target.id,e.target.value))},n.handleSubmit=function(){var e=Object(u.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n.setState({isLoading:!0}),e.next=4,fetch("https://chrono-omega.herokuapp.com/api/login?mail="+n.state.email+"&pw="+n.state.password,{method:"GET"}).then(function(e){return e.text()}).then(function(e){"false"!==e&&F("token",e)});case 4:return e.next=6,J().then(function(e){n.props.userNameChange(e),n.props.userHasAuthenticated(""!==e)}).then(function(){n.setState({isLoading:!1}),!0===n.props.isAuthenticated?n.props.history.push("/"):alert("Login failed.")});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.state={email:"",password:""},n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"validateForm",value:function(){return this.state.email.length>0&&this.state.password.length>0}},{key:"render",value:function(){return r.a.createElement("div",{className:"Login"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(y.a,{controlId:"email",bsSize:"large"},r.a.createElement(S.a,null,"Email"),r.a.createElement(x.a,{autoFocus:!0,type:"email",value:this.state.email,onChange:this.handleChange})),r.a.createElement(y.a,{controlId:"password",bsSize:"large"},r.a.createElement(S.a,null,"Password"),r.a.createElement(x.a,{value:this.state.password,onChange:this.handleChange,type:"password"})),r.a.createElement(A,{block:!0,bsSize:"large",disabled:!this.validateForm(),type:"submit",isLoading:this.state.isLoading,text:"Login",loadingText:"Logging in\u2026"})))}}]),t}(a.Component),R=(n(131),function(){return r.a.createElement("div",{className:"NotFound"},r.a.createElement("h3",null,"Sorry, page not found!"))}),U=function(e){var t=e.component,n=e.props,a=Object(C.a)(e,["component","props"]);return r.a.createElement(j.a,Object.assign({},a,{render:function(e){return r.a.createElement(t,Object.assign({},e,n))}}))},W=(n(133),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).handleChange=function(e){n.setState(Object(O.a)({},e.target.id,e.target.value))},n.handleSubmit=function(){var e=Object(u.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n.setState({isLoading:!0}),e.next=4,fetch("https://chrono-omega.herokuapp.com/api/newaccount?mail="+n.state.email+"&pw="+n.state.password,{method:"POST"}).then(function(e){return e.text()}).then(function(e){"false"===e?alert("Account creation failed."):n.props.history.push("/")});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.state={email:"",password:"",confirmPassword:"",confirmationCode:"",newUser:!1},n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"validateForm",value:function(){return this.state.email.length>0&&this.state.password.length>0&&this.state.password===this.state.confirmPassword}},{key:"validateConfirmationForm",value:function(){return this.state.confirmationCode.length>0}},{key:"renderForm",value:function(){return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(y.a,{controlId:"email",bsSize:"large"},r.a.createElement(S.a,null,"Email"),r.a.createElement(x.a,{autoFocus:!0,type:"email",value:this.state.email,onChange:this.handleChange})),r.a.createElement(y.a,{controlId:"password",bsSize:"large"},r.a.createElement(S.a,null,"Password"),r.a.createElement(x.a,{value:this.state.password,onChange:this.handleChange,type:"password"})),r.a.createElement(y.a,{controlId:"confirmPassword",bsSize:"large"},r.a.createElement(S.a,null,"Confirm Password"),r.a.createElement(x.a,{value:this.state.confirmPassword,onChange:this.handleChange,type:"password"})),r.a.createElement(A,{block:!0,bsSize:"large",disabled:!this.validateForm(),type:"submit",isLoading:this.state.isLoading,text:"Signup",loadingText:"Signing up\u2026"}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"Signup"},this.renderForm())}}]),t}(a.Component)),q=function(e){var t=e.childProps;return r.a.createElement(k.a,null,r.a.createElement(U,{path:"/",exact:!0,component:G,props:t}),r.a.createElement(U,{path:"/login",exact:!0,component:K,props:t}),r.a.createElement(U,{path:"/signup",exact:!0,component:W,props:t}),r.a.createElement(j.a,{component:R}))},Q=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).setName=function(e){n.setState({name:"@ "+e})},n.userHasAuthenticated=function(e){n.setState({isAuthenticated:e})},n.handleLogout=function(e){n.userHasAuthenticated(!1),z("token"),n.setName(""),n.props.history.push("/login")},n.state={isAuthenticated:!1,isAuthenticating:!0,isLoading:!1,name:""},n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"clearCookieAndDeauth",value:function(){z("token"),this.setState({isAuthenticated:!1})}},{key:"componentDidMount",value:function(){var e=Object(u.a)(c.a.mark(function e(){var t=this;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({isAuthenticating:!0}),this.setName(""),""!==P("token")){e.next=6;break}this.clearCookieAndDeauth(),e.next=14;break;case 6:return e.prev=6,e.next=9,J().then(function(e){!1===e||"false"===e?t.clearCookieAndDeauth():(t.setName(e),t.setState({isAuthenticated:""!==e}))});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(6),"No current user"!==e.t0&&alert(e.t0);case 14:this.setState({isAuthenticating:!1}),!1===this.state.isAuthenticated&&this.props.history.push("/login");case 16:case"end":return e.stop()}},e,this,[[6,11]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e={isAuthenticated:this.state.isAuthenticated,userNameChange:this.setName,userHasAuthenticated:this.userHasAuthenticated,isLoading:this.state.isLoading};return!this.state.isAuthenticating&&r.a.createElement("div",{className:"App container"},r.a.createElement(b.a,{fluid:!0,collapseOnSelect:!0},r.a.createElement(b.a.Header,null,r.a.createElement(b.a.Brand,null,r.a.createElement(f.a,{to:"/"},"Chrono Alpha ",this.state.name)),r.a.createElement(b.a.Toggle,null)),r.a.createElement(b.a.Collapse,null,r.a.createElement(v.a,{pullRight:!0},this.state.isAuthenticated?r.a.createElement(E.a,{onClick:this.handleLogout},"Logout"):r.a.createElement(a.Fragment,null,r.a.createElement(w.LinkContainer,{to:"/signup"},r.a.createElement(E.a,null,"Signup")),r.a.createElement(w.LinkContainer,{to:"/login"},r.a.createElement(E.a,null,"Login")))))),r.a.createElement(q,{childProps:e}))}}]),t}(a.Component),V=Object(g.a)(Q),X=n(56);s.a.render(r.a.createElement(X.a,null,r.a.createElement(V,null)),document.getElementById("root"))},81:function(e,t,n){e.exports=n(150)},92:function(e,t,n){},94:function(e,t,n){}},[[81,2,1]]]);
//# sourceMappingURL=main.8e481844.chunk.js.map